<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-cyan-500 flex justify-center items-center min-h-screen">
    <div class="w-full max-w-md bg-white p-6 rounded-lg">
        <h1 class="text-3xl font-semibold text-center text-gray-800 mb-12">ðŸ“‹ To-Do List</h1>
        <div class="flex mb-4">
            <input id="taskInput" type="text" placeholder="Add a new task..." 
                class="flex-1 px-4 py-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
            <button onclick="addTask()" class="bg-purple-500 text-white px-5 py-2 rounded-r-lg hover:bg-purple-700">
               Add
            </button>
        </div>
        <ul id="taskList" class="space-y-3"></ul>
    </div>

    <script>
        function getTasks() {
            return JSON.parse(localStorage.getItem("tasks")) || [];
        }

        function saveTasks(tasks) {
            localStorage.setItem("tasks", JSON.stringify(tasks));
        }

        function addTask(taskText = null, isNew = true) {
            let taskInput = document.getElementById("taskInput");
            let taskList = document.getElementById("taskList");
            let text = taskText || taskInput.value;
            if (text === "") return;

            if(isNew) {
                let tasks = getTasks();
                tasks.push(text);
                saveTasks(tasks);
            }

            let li = document.createElement("li");
            li.className = "flex justify-between items-center bg-gray-100 px-4 py-3 rounded-lg shadow";
            
            let span = document.createElement("span");
            span.className = "flex-1 cursor-pointer text-gray-800 font-medium";
            span.textContent = text;
            
            let input = document.createElement("input");
            input.type = "text";
            input.value = text;
            input.className = "hidden flex-1 px-2 py-1 border rounded focus:outline-none focus:ring-2 focus:ring-purple-500";
            
            let updateButton = document.createElement("button");
            updateButton.textContent = "Update";
            updateButton.className = "hidden bg-green-500 text-white px-3 py-1 rounded hover:bg-green-700 transition";
            updateButton.onclick = function() {
                if (input.value.trim() !== "") {
                    let updatedTasks = getTasks();
                    let index = updatedTasks.indexOf(span.textContent);
                    if (index !== -1) {
                        updatedTasks[index] = input.value;
                        saveTasks(updatedTasks);
                    }
                    span.textContent = input.value;
                }
                input.classList.add("hidden");
                updateButton.classList.add("hidden");
                span.classList.remove("hidden");
            };

            span.onclick = function() {
                input.classList.remove("hidden");
                updateButton.classList.remove("hidden");
                span.classList.add("hidden");
                input.focus();
            };

            let deleteButton = document.createElement("button");
            deleteButton.className = "text-red-500 hover:text-red-700 text-xl";
            deleteButton.textContent = "Delete";
            deleteButton.onclick = function() {
                let updatedTasks = getTasks().filter(task => task !== span.textContent);
                saveTasks(updatedTasks);
                li.remove();
            };
            
            li.appendChild(span);
            li.appendChild(input);
            li.appendChild(updateButton);
            li.appendChild(deleteButton);
            taskList.appendChild(li);

            if (!taskText) taskInput.value = "";
        }
        
        function loadTasks() {
            let taskList = document.getElementById("taskList");
            taskList.innerHTML = "";
            let tasks = getTasks();
            tasks.forEach(task => addTask(task , false));
        }
        window.onload = loadTasks;
    
    </script>
</body>
</html>
